<!DOCTYPE html>
<html>
  <head>
    <meta charset="ISO-8859-1" />
    <title>Home</title>

    <link rel="stylesheet" href="/style.css" />
    <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <script src="/webjars/jquery/jquery.min.js"></script>

    <script>
      $(document).ready((e) => {
        $("#login").click(() => {
          let name = $("#name-value").val();
          localStorage.setItem("name", name);
          $("#name-value").val("");
          localStorage.setItem("myuuid", uuidv4());
          if(localStorage.getItem("myimage") == null)
            localStorage.setItem("myimage", "https://assets.materialup.com/uploads/5b045613-638c-41d9-9b7c-5f6c82926c6e/preview.png");
          location.href = "Chat.html";
        });

        $("#myimage").on('change',   function () {
          var reader = new FileReader();
          var selectedFile = this.files[0];
          reader.onload = function () {
            localStorage.setItem("myimage", this.result);
          }
          reader.readAsDataURL(selectedFile);
        });
      });

      function uuidv4() {
        return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
          (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
        );
      }
    </script>

  </head>
  <body class="bg-warning">
    <div id="name-form" class="bg-info d-flex align-items-center">
      <div class="container-fluid">
        
        <div class="row">
          <div class="col-md-4 offset-md-4">
            <div class="input-group">
              <input type="text" placeholder="Enter Your Name" id="name-value" autofocus="autofocus" class="form-control" /><br>
            </div>
          </div>
        </div>
        
        <div class="row"><br></div>
        

        <div class="row">
          <div class="col-md-4 offset-md-4">
            <div class="input-group">
              <input type="file" placeholder="chosie your image" id="myimage" class="form-control"/>            
            </div>
          </div>
        </div>
        
         <div class="row"><br></div>
        
        <div class="row">
          <div class="col-md-4 offset-md-4">
            <div class="input-group">
              <div class="input-group-append">
                <button class="btn btn-dark" id="login">Enter</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </body>
</html>
